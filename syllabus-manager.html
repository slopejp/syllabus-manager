<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>シラバス管理ツール(プロトタイプ)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <header>
      <h1>シラバス管理ツール(プロトタイプ)</h1>
      <div class="controls">
        <input id="search" type="text" placeholder="科目名・科目コードで検索..."/>
        <button id="addBtn">＋追加</button>
        <button id="checkBtn">📊 要件チェック</button>
      </div>
    </header>

    <div class="grid">
      <section class="card" aria-labelledby="inprogress-title">
        <h2 id="inprogress-title">📂 履修中 <span class="tag" id="count-in">0</span></h2>
        <ul class="list" id="inprogress-list"></ul>
      </section>

      <section class="card" aria-labelledby="wishlist-title">
        <h2 id="wishlist-title">⭐ ウィッシュリスト <span class="tag" id="count-wl">0</span></h2>
        <ul class="list" id="wishlist-list"></ul>
      </section>

      <section class="card" aria-labelledby="completed-title">
        <h2 id="completed-title">✅ 履修済み <span class="tag" id="count-comp">0</span></h2>
        <ul class="list" id="completed-list"></ul>
        <input type="file" id="fileInput" style="display:none" accept="application/json" />
        <div style="margin-left:auto;color:var(--muted);font-size:0.9rem">
          データはブラウザの localStorage に保存されます
        </div>
      </section>
    </div>

    <footer>
      <button class="muted-btn" id="clearAll">🗑 全削除</button>
      <button class="muted-btn" id="exportBtn">💾 エクスポート</button>
      <button id="importBtn">📁 インポート</button>
      <!-- 要件チェックモーダル -->
      <div class="modal-back" id="checkModal">
        <div class="modal">
          <h2>📊 進級・卒業要件チェック</h2>
          <div id="checkResults"></div>
          <footer>
            <button class="muted-btn" id="closeCheckBtn">閉じる</button>
          </footer>
        </div>
      </div>

  <!-- modal: add/edit -->
  <div class="modal-back" id="modalBack">
    <div class="modal" role="dialog" aria-modal="true">
      <h3 id="modalTitle">科目を追加</h3>
      <form id="itemForm">
        <input type="hidden" id="itemId" />

        <label for="subjectSearch">科目検索</label>
        <input type="text" id="subjectSearch" placeholder="科目名・コード・教員名で検索">

        <!-- 科目選択 -->
        <label for="field-subject">科目名</label>
        <select id="field-subject" required>
          <option value="">選択してください</option>
          <!-- JavaScriptでmasterSubjectsから生成 -->
        </select>

        <!-- メモは残す -->
        <label for="field-note">メモ(任意)</label>
        <textarea id="field-note" rows="2"></textarea>

        <!-- 状態選択 -->
        <label for="field-status">状態</label>
        <div class="row">
          <select id="field-status">
            <option value="inprogress">履修中</option>
            <option value="wishlist">ウィッシュリスト</option>
            <option value="completed">履修済み</option>
          </select>
        </div>

        <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
          <button type="submit" id="saveBtn">保存</button>
          <button type="button" id="cancelBtn" class="muted-btn">キャンセル</button>
        </div>
      </form>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>